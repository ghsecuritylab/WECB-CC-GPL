<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Advanced Setup - Management</title>
<%actInclude("wcb_common.html")%>

<script language="javascript">

var syslog_form;
var id_command;
var id_syslog_enable,id_syslog_disable,id_syslog_server;
var reboot_btn, apply_btn;

function doLoad()
{
	syslog_form = document.getElementById("syslog_form");
	id_command = document.getElementById("id_command");

	id_syslog_server = document.getElementById("id_syslog_server");
	id_syslog_enable = document.getElementById("id_syslog_enable");
	id_syslog_disable = document.getElementById("id_syslog_disable");
	  
	apply_btn = document.getElementById("apply_btn");
	apply_btn.onclick = doApply;

	doGetServerIP();
}

function doGetServerIP()
{
	var params = "&command=getvalue";		
	ajaxPost("advsyslog.cgi", params, resGetValue);
}

function resGetValue(message)
{
	//alert(message);
	var messageArray = message.split("||");
	
	if(messageArray.length > 1)
	{			
		for(var i = 0; i < messageArray.length - 1; i++)
		{
			var index = 0;
			var advArray = messageArray[i].split("|");
			var ip = changeString(advArray[index++]);
			var enable = changeString(advArray[index++]);

			id_syslog_server.value = ip;
			if(enable==1)
		      		 id_syslog_enable.checked = true;
			else
				id_syslog_disable.checked = true;
				
		}
	}
}

function doApply()
{
	if(trim(id_syslog_server.value) == "")
	{
		pop_up("Syslog Server Address is null");
		id_syslog_server.focus();
		return;
	}
	else if(!isValidIpAddress(id_syslog_server.value))
	{
		pop_up("Syslog Server Address is invalid");
		id_syslog_server.focus();
		return;
	}
		
      id_command.value = "apply";
      syslog_form.submit();
}

</script>
</head>

<body>
	<div id="wrapper">    
		<%actInclude("top_nav.html")%>    
		<%actInclude("left_adv.html")%>
		
		<div id="content_right">
		    <div id="content_right_header"></div>
		    <div id="content_right_contentarea">
	        	<h1>Syslog Settings</h1>

	        	<form id="syslog_form" method="post" action="advsyslog.cgi">
		        <input type="hidden" name="command" id="id_command" value="apply" />
				<input type="hidden" name="mypage" value="/adv_syslog.html" />
		       
				<table cellpadding="0" cellspacing="2" border="0">
					<tr>
						<td width="250"><label for="id_syslog_server">Enable Logging To Syslog Server:</label></td>
						<td>
							<input name="syslog_enable" id="id_syslog_enable" type="radio" value="1"/> enable
							<input name="syslog_enable" id="id_syslog_disable" type="radio" value="0"/> disable
						</td>
					</tr>
					<tr>
						<td><label for="id_subnet">Syslog Server IP Address:</label></td>
						<td>
							<input name="syslog_server" id="id_syslog_server" type="text" size="25" maxlength="32" style="height: 16px"/> 
						</td>
					</tr>
				</table>
				</form>

				<table cellpadding="0" cellspacing="2" border="0">
					<tr>
						<td width="300" align="right">
							<a href="###" class="btn" id="apply_btn"></a> 							
						</td>
					</tr>
				</table>
				
	        	<div class="clear_left"></div>
	        </div>
	        <div id="content_right_footer"></div>
		</div>
        <div class="clear_left"></div>
   		<%actInclude("wcb_footer.html")%>
	</div>
</body>
</html>

